<!DOCTYPE html>
<html lang="fr"
      xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/base :: layout(${pageTitle}, ~{::content})}">

<div th:fragment="content">

  <div class="d-flex align-items-center justify-content-between mb-4">
    <div>
      <h1 class="h3 mb-1">Dashboard admin</h1>
      <p class="text-muted mb-0">Vue d’ensemble de la plateforme.</p>
    </div>
    <div class="d-flex gap-2">
      <a class="btn btn-outline-secondary" th:href="@{/}">Accueil</a>
      <form th:action="@{/logout}" method="post" class="m-0">
        <button type="submit" class="btn btn-outline-danger">Déconnexion</button>
      </form>
    </div>
  </div>

  <div class="row g-3">
    <div class="col-12 col-md-4">
      <div class="card shadow-sm">
        <div class="card-body">
          <div class="text-muted">Utilisateurs</div>
          <div class="display-6 fw-semibold" th:text="${userCount}">0</div>
          <a class="btn btn-sm btn-outline-primary mt-2" th:href="@{/admin/users}">Gérer</a>
        </div>
      </div>
    </div>

    <div class="col-12 col-md-4">
      <div class="card shadow-sm">
        <div class="card-body">
          <div class="text-muted">Cours (total)</div>
          <div class="display-6 fw-semibold" th:text="${courseCount}">0</div>
          <div class="small text-muted">
            Publiés : <span th:text="${publishedCourseCount}">0</span>
          </div>
          <a class="btn btn-sm btn-outline-primary mt-2" th:href="@{/admin/courses}">Gérer</a>
        </div>
      </div>
    </div>

    <div class="col-12 col-md-4">
      <div class="card shadow-sm">
        <div class="card-body">
          <div class="text-muted">Classes</div>
          <div class="display-6 fw-semibold" th:text="${classCount}">0</div>
          <div class="small text-muted">
            Inscriptions : <span th:text="${enrollmentCount}">0</span>
          </div>
          <a class="btn btn-sm btn-outline-primary mt-2" th:href="@{/stats/admin}">Stats</a>
        </div>
      </div>
    </div>
  </div>

  <div class="row g-3 mt-1">
    <div class="col-12">
      <div class="card shadow-sm">
        <div class="card-body">
          <h2 class="h5 mb-2">Accès rapides</h2>
          <div class="d-flex flex-wrap gap-2">
            <a class="btn btn-primary" th:href="@{/admin/users}">Utilisateurs</a>
            <a class="btn btn-primary" th:href="@{/admin/courses}">Cours</a>
            <a class="btn btn-outline-dark" th:href="@{/stats/admin}">Statistiques</a>
            <a class="btn btn-outline-secondary" th:href="@{/catalog}">Voir catalogue</a>
          </div>

          <div class="small text-muted mt-3">
            Activité quiz : <span th:text="${attemptCount}">0</span> tentatives enregistrées.
          </div>
        </div>
      </div>
    </div>
  </div>

</div>
</html>
